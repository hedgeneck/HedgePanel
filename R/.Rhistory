install.packages(RSQLite)
install.packages("RSQLite")
install.packages("bizdays")
library(RSQLite)
library(bizdays)
verson
version
install.packages("installr")
library(installr)
updateR()
version
library(RSQLite)
install.packages("RSQLite")
cal = bizdays::calendars()
library(RSQLite)
library(bizdays)
install.packages("bizdays")
cal = bizdays::calendars()
cal
url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
txt = readLines(url)
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
dt = as.Date("2018-07-17", "%Y-%m-%d")
dt
class(dt)
class("2018-07-17")
format?
help format
?format
#url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
url = format(dt,"ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
url
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI(as.Date("2018-07-16"))
ler.CETIP.CDI(as.Date("2018-07-28"))
ler.CETIP.CDI(as.Date("2018-07-29"))
ler.CETIP.CDI(as.Date("2018-07-30"))
dt
class(dt)
is(dt,"Date")
is(dt,"class")
is(dt,"numeric")
is(dt,"Data")
stopifnot(is(dt,"Date"))
ler.CETIP.CDI(as.Date("2018-07-30"))
ler.CETIP.CDI("2018-07-30")
ler.CETIP.CDI("2018-07-30")
ler.CETIP.CDI(as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"))
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
x=1
# ler.CETIP.CDI(as.Date("2018-07-30"))
ler.CETIP.CDI = function(dt){
#url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
stopifnot(is(dt,"Date"), length(dt) == 1)
url = format(dt,"ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = readLines(url)
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
return(cdi)
}
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
x=1
# ler.CETIP.CDI(as.Date("2018-07-30"))
ler.CETIP.CDI = function(dt){
#url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
stopifnot(is(dt,"Date"), length(dt) == 1)
url = format(dt,"ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = readLines(url)
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
return(cdi)
}
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
x=1
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
dt = as.Date("2018-07-17", "%Y-%m-%d")
dt = as.Date("2018-07-17", "%Y-%m-%d")
x=3
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
debugSource('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
print("porra")
ler.CETIP.CDI(as.Date("2018-07-30"), as.Date("2018-07-30"))
ler.CETIP.CDI(as.Date("2018-07-30"))
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI(as.Date("2018-07-30"))
ler.CETIP.CDI(47)
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
source('C:/Projetos/HedgePanel/R/ler.CETIP.CDI.R')
ler.CETIP.CDI = function(dt){
#url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
stopifnot(is(dt,"Date"), length(dt) == 1)
url = format(dt,"ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = readLines(url)
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
return(cdi)
}
ler.CETIP.CDI(as.Date("2018-07-30"),as.Date("2018-07-30"))
x = stopifnot(is(dt,"Date"), length(dt) == 1)
x
x = stopifnot(TRUE)
X
x
ler.CETIP.CDI([as.Date("2018-07-30"), as.Date("2018-07-30")])
[1 2]
c(1,2)
c(as.Date("2018-07-30"), as.Date("2018-07-30")
)
ler.CETIP.CDI(c(as.Date("2018-07-30"), as.Date("2018-07-30")))
ler.CETIP.CDI("abc")
dt = as.Date("2018-07-17", "%Y-%m-%d")
ler.CETIP.CDI(dt)
# ler.CETIP.CDI(c(as.Date("2018-07-30"), as.Date("2018-07-30")))
ler.CETIP.CDI = function(dt){
#url = "ftp://ftp.cetip.com.br/MediaCDI/20121218.txt"
stopifnot(is(dt,"Date"), length(dt) == 1)
url = format(dt,"ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = readLines(url)
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
return(cdi)
}
ler.CETIP.CDI(dt)
library(bizdays)
cal = create.calendar("ANBIMA", holidaysANBIMA, weekdays=c("saturday", "sunday"))
cal
datas = bizdays::bizseq(as.Date("2018-07-01"), as.Date("2018-07-19"))
datas
datas[3]
class(datas[3])
for(i in 1:length(datas)){
dt = datas[i]
cdi = ler.CETIP.CDI(dt)
print(dt)
print(cdi)
}
for(i in 1:length(datas)){
dt = datas[i]
cdi = ler.CETIP.CDI(dt)
print(dt)
print(cdi)
}
datas = bizdays::bizseq(as.Date("2018-07-01"), as.Date("2018-07-19"), "ANBIMA")
for(i in 1:length(datas)){
dt = datas[i]
cdi = ler.CETIP.CDI(dt)
print(dt)
print(cdi)
}
source("Scripts/CETIP_CDI.R")
source("Scripts/CETIP_CDI.R")
source("CETIP_CDI.R")
source("CETIP_CDI.R")
ler.CETIP.CDI(as.Date("2018-04-13"))
ler.CETIP.CDI(as.Date("2018-04-14"))
ler.CETIP.CDI(as.Date("2018-04-15"))
dt = as.Date("2018-04-15")
stopifnot(is(dt, "Date"), length(dt) == 1)
url = format(dt, "ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = try(readLines(url), silent = T)
url
as.Date("2018-04-13")
stopifnot(is(dt, "Date"), length(dt) == 1)
url = format(dt, "ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = try(readLines(url), silent = T)
url
dt=as.Date("2018-04-13")
stopifnot(is(dt, "Date"), length(dt) == 1)
url = format(dt, "ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = try(readLines(url), silent = T)
url
ler.CETIP.CDI(as.Date("2018-04-13"))
stopifnot(is(dt, "Date"), length(dt) == 1)
url = format(dt, "ftp://ftp.cetip.com.br/MediaCDI/%Y%m%d.txt")
txt = try(readLines(url), silent = T)
if(is(txt, "try-error")){
stop(paste0("erro ao ler o CDI para a data ", dt))
}
txt = gsub(" ", "", txt)
cdi = as.numeric(txt)/100
return(cdi)
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "BD/BDM.sqlite")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "storage.db")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
dates.to.string = function(df){
for(i in 1:ncol(df)){
if(class(df[,i]) == "Date") df[,i] = format(df[,i], "%Y-%m-%d")
}
return(df)
}
source("CETIP_CDI.R")
conn = conectar.bdm()
conn
carregar.CETIP.CDI(as.Date("2018-04-19"))
dbDisconnect(conn)
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "storage.db")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
dates.to.string = function(df){
for(i in 1:ncol(df)){
if(class(df[,i]) == "Date") df[,i] = format(df[,i], "%Y-%m-%d")
}
return(df)
}
source("CETIP_CDI.R")
conn = conectar.bdm()
ultima.data.CETIP.CDI()
datas = dias.uteis.desde(ultima.data.CETIP.CDI())
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "storage.db")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
dias.uteis.desde = function(date){
if(is.na(date)) date = as.Date("2019-07-01")
datas = bizseq(date, Sys.Date()-1, "Brazil/ANBIMA")
datas[datas != date]
}
dates.to.string = function(df){
for(i in 1:ncol(df)){
if(class(df[,i]) == "Date") df[,i] = format(df[,i], "%Y-%m-%d")
}
return(df)
}
source("CETIP_CDI.R")
conn = conectar.bdm()
ultima.data.CETIP.CDI()
atualizar.CETIP.CDI()
source('C:/Projetos/HedgePanel/R/CARGA_BDM.R')
source('C:/Projetos/HedgePanel/R/CARGA_BDM.R')
dbConnect(dbDriver("SQLite"), "../HedgePanel/storage.db")
dbConnect(dbDriver("SQLite"), "../HedgePainel/storage.db")
dbConnect(dbDriver("SQLite"), "../HedgePanel/storage.db")
atualizar.CETIP.CDI()
conn = conectar.bdm()
atualizar.CETIP.CDI()
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "../HedgePanel/storage.db")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
dias.uteis.desde = function(date){
if(is.na(date)) date = as.Date("2012-08-20")
datas = bizseq(date, Sys.Date()-1, "Brazil/ANBIMA")
datas[datas != date]
}
dates.to.string = function(df){
for(i in 1:ncol(df)){
if(class(df[,i]) == "Date") df[,i] = format(df[,i], "%Y-%m-%d")
}
return(df)
}
source("CETIP_CDI.R")
conn = conectar.bdm()
atualizar.CETIP.CDI()
dbDisconnect(conn)
library(RSQLite)
library(bizdays)
cal = bizdays::calendars()
conectar.bdm = function(){
dbConnect(dbDriver("SQLite"), "../HedgePanel/storage.db")
}
desconectar.bdm = function(conn){
dbDisconnect(conn)
}
dias.uteis.desde = function(date){
if(is.na(date)) date = as.Date("2012-08-20")
datas = bizseq(date, Sys.Date()-1, "Brazil/ANBIMA")
datas[datas != date]
}
dates.to.string = function(df){
for(i in 1:ncol(df)){
if(class(df[,i]) == "Date") df[,i] = format(df[,i], "%Y-%m-%d")
}
return(df)
}
source("CETIP_CDI.R")
conn = conectar.bdm()
atualizar.CETIP.CDI()
dbDisconnect(conn)
